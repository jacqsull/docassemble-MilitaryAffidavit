metadata:
  title: Military Affidavit Interview (Massachusetts Court System)
  short title: Military Affidavit
  comment: One of several documents necessary when filing a Complaint for Divorce.
---
modules:
#  - docassemble.MACourts.macourts
  - docassemble.base.util
# - docassemble.gbls
#---
#include:
#  - docassemble.gbls:basic-questions-gbls.yml
---
objects:
  # - macourts: MACourtList.using(courts=['probate_and_family_courts'])
  - client: Individual
  - plaintiff: Individual
  - defendant: Individual
  - opposing_party: Individual
---
mandatory: True
code: |
  client.name.first
  # selected_court
  #  testing_court
  client.name.first
  opposing_party.name.first
  if client_role == 'Plaintiff':
    plaintiff = client
    defendant = opposing_party
  else:
    defendant = client
    plaintiff = opposing_party
  if client_current_mil_svc:
    current_mil_srv_in = True
    current_mil_srv_in_list = client.name.full()
    current_mil_srv_not_list = ''
	  mil_aff_facts = client.name.full() + ' is currently in military service.'
  else:
    current_mil_srv_in = False
    current_mil_srv_unknown_list = ''
    current_mil_srv_not = True
    current_mil_srv_not_list = client.name.full()
    current_mil_srv_in_list = ''
	  mil_aff_facts = client.name.full() + ' is not currently in military service.'
  if op_current_mil_svc:
    current_mil_srv_unknown = False
    current_mil_srv_unknown_list = ''
    current_mil_srv_in = True
    current_mil_srv_in_list += opposing_party.name.full()
    mil_aff_facts += opposing_party.name.full() + ' is currently in military service.'
  elif op_current_mil_svc == False:
    current_mil_srv_unknown = False
    current_mil_srv_not = True
    current_mil_srv_not_list += opposing_party.name.full()
	  mil_aff_facts += opposing_party.name.full() + ' is not currently in military service.'
  else:
    current_mil_srv_unknown = True
    current_mil_srv_unknown_list = opposing_party.name.full()
	  mil_aff_facts += " I do not know if + opposing_party.name.full() + ' is currently in military service."
    understand_bond 
  mil_aff
---
field: testing_court
question: |
  The court
subquestion: |  
  ${selected_court.address}
  
  ${selected_court.address.county}
  
  ${selected_court.description}
---
question: |
  What court is your case in?
fields:
  - Choose a court: selected_court
    datatype: object
    choices: |
      macourts
---
question: |
  ${selected_court} ${selected_court.address.on_one_line()}
---
question: |
  What is your name? 
fields:
  - First name: client.name.first
  - Last name: client.name.last
---
question: |
  What is the other person's name? 
fields:
  - First name: opposing_party.name.first
  - Last name: opposing_party.name.last
---
question: |
  Are you the plaintiff or the defendant? 
field: client_role
choices: 
  - Plaintiff
  - Defendant
---
question: |
  Are you currently in the military?
yesno: client_current_mil_svc
---
question: |
  Is ${ opposing_party.name.first } currently in the military service?
yesnomaybe: op_current_mil_svc  
---
question: |
  Because you don't know if ${ opposing_party.name.first } is currently in the military, do you understand that the court, 
  before entering judgment, may require that you file a bond. 
yesno: understand_bond
---
question: |
The following facts support this affidavit (required):
fields:
  - no label: mil_aff
	  default: ${mil_aff_facts}
	  datatype: area
---
mandatory: True
question: Here is your document.
attachment:
  - name: military affidavit
    filename: military_affidavit
    pdf template file: military_affidavit2.pdf
    fields:
      - "COURT DEPARTMENT Superior": something
      - "DIVISION OR COUNTY": something
      - "plaintiff": ${plaintiff}
      - "defendant": ${defendant}
      - "DOCKET NUMBER": something
      - "client": ${client}
      - "current_mil_srv_in" : ${current_mil_srv_in}
      - "current_mil_srv_in_list" : ${current_mil_srv_in_list}
      - "current_mil_srv_not" : ${current_mil_srv_not}
      - "current_mil_srv_not_list" : ${current_mil_srv_not_list}
      - "current_mil_srv_unknown" : ${current_mil_srv_unknown}
      - "current_mil_srv_unknown_list" : ${current_mil_srv_unknown_list}
      - "DATED": something
